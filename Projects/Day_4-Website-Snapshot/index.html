<!DOCTYPE html><html lang="en">
    <head>

    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Screnshot a website with it's url via pure JavaScript" />
    <title>Web Snapshot - JavaScript</title>
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://app.marvelly.com.ng/">
    <meta property="og:title" content="Web Snapshot - JavaScript">
    <meta property="og:description" content="Screnshot a website with it's url via pure JavaScript">
<meta property="og:image" content="https://app.marvelly.com.ng/100daysofMiva/100.png">

    <link
        href="https://fonts.googleapis.com/css2?family=Urbanist:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400&display=swap"
        rel="stylesheet"
    />
    
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
        <style>
    .swal2-container.swal2-center>.swal2-popup{
  background-color: #121212 !important;
}
.swal2-html-container, .swal2-title{
  color: white !important;
}
#message {
            display: none;
            padding: 0.5rem;
            margin-bottom: 1rem;
            border-radius: 0.5rem;
            background-color: #eaf4e1;
            color: #2e7d32;
            text-align: center;
        }
        
    </style>
    <link href="https://app.marvelly.com.ng/cgpa/design/style.css" rel="stylesheet">
    <script>
        if (localStorage.getItem('dark-mode') === 'false' || !('dark-mode' in localStorage)) {
            document.querySelector('html').classList.remove('dark');
        } else {
            document.querySelector('html').classList.add('dark');
        }
   
    </script>
    <script defer data-domain='preview.cruip.com,rollup.cruip.com' src='https://plausible.cruip.com/js/script.js'></script>
</head>
<body class="cj90m c7e3b cisrt c7wkd c2gcs ce7fn clmvh">

    <!-- Page wrapper -->
    <div class="cbvui chs6j c8gx0 ckwv3 cjycj cezsk">

        <!-- Bg coloured shapes -->
        <div class="cwysf cs1uv cojlt c9v7h cvhgl cr8aa cetkn cag0k" aria-hidden="true">
            <div class="c5bik c9b4s c0oy8 cmix3 cj04y ckrsz cje3v csstg cevtx cv8gl cyy6y cr8aa c98s8 c3yb8"></div>
            <div class="cfwzm chupg c9b4s c0oy8 cmix3 cj04y ckrsz csstg c8m5q cevtx cv8gl cyy6y cr8aa cjgsx cnbs3 c3yb8"></div>
            <div class="csla3 chupg c9b4s c0oy8 cmix3 cj04y ckrsz csstg c8m5q cevtx cv8gl cyy6y cr8aa c110f c9hsq cggi5"></div>
            <div class="cs09d czbwe cd03c c9b4s c0oy8 cmix3 cj04y ckrsz csstg cevtx cv8gl cc2fz cyy6y cr8aa c8zmq cwoae"></div>
            <div class="cpxaw crjok c9b4s c0oy8 cmix3 cj04y ckrsz csstg c8m5q cevtx cv8gl cpsm9 cgtcx cc1h8 cr8aa c2svq"></div>
            <div class="c55mv cpvgd c9b4s c0oy8 cmix3 cj04y ckrsz csstg c8m5q cevtx cv8gl cc2fz cyy6y cr8aa cubdc cggi5"></div>
        </div>

        <!-- Vertical lines -->
        <div class="cwysf cs1uv cojlt c9v7h cvhgl cr8aa cag0k" aria-hidden="true">
            <!-- Left side -->
            <div class="c9dpd c30rf crc45 c06dl cd91y czb12 c2wd7 cd8xp cpue7 cevtx ch88u cr5hf cxgoq c6ppr cjkk2 chsmj"></div>
            <!-- Right side -->
            <div class="c9dpd c30rf crc45 c06dl cd91y czb12 c2wd7 cd8xp cpue7 cevtx ch88u cr5hf cvq9r cxgoq cj85p c6ppr"></div>            
        </div>

        <!-- Site header -->
        <header class="c9v3y crbyi c7hiy cvq6c cd5ux cr8aa cligc ctdcn coe0p crj7h c2dja casec">
            <div class="cy6zq crh5c">
                <div class="cpthp czrhe">
                    <div class="cvvig cba0k c04cg c45gv c5plh chwso cfctz ccjiw ckwv3 ckqfb cf0cr cezsk c2svq c02c5">

                        <!-- Border with dots in corners -->
                        <div class="ch4rd cetk9 couhs c53q4 cehp5 chqy8 cukhb cx8c7 cippd crgvw c2z22 cv89o cr2ij cpue7 crc6r cevtx cr5hf cxgoq cjkk2 c1qs0 ckoug cpnw7 cr8aa cag0k" aria-hidden="true"></div>
            
                        <!-- Site branding -->
                        <div class="ctuhr">
                            <!-- Logo -->
                            <a href="./">
                                <img src="https://app.marvelly.com.ng/cgpa/design/Miva-favicon.png" width="32" height="32"/>
                                                      
                            </a>
                        </div>
            
                        <!-- Navigation links -->
                        <nav class="c3927 cezsk">
                            <ul class="chwso cxpc2 cmj1h cc7et cezsk">
                                <li>
                                    <a class="cpvyo cv7b2 cj90m cgvn6 c2gcs ccjiw cjnro c02c5" m-nav href="./">Home</a>
                                </li>
                                <li>
                                    <a class="cpvyo cv7b2 cj90m cgvn6 c2gcs ccjiw cjnro c02c5" onclick="showApiInfo()">API</a>
                                </li>
                                <li>
                                    <a class="cpvyo cv7b2 cj90m cgvn6 c2gcs ccjiw cjnro c02c5" target="_blank" href="https://marvelly.com.ng">The Dev</a>
                                </li>                                
                            </ul>
                        </nav>

                        <!-- Dark / Light mode toggle -->
                        <div class="chso3 ctuhr cezsk">
                            <input type="checkbox" name="light-switch" id="light-switch" class="light-switch cz99u">
                            <label class="c9yqy co456" for="light-switch">
                                <svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">
                                    <path class="cdp5p crwfp" d="M9 0H7v2h2V0ZM14.294 3.052 12.88 1.637 11.466 3.05l1.413 1.414 1.415-1.413ZM16 7h-2v2h2V7ZM11.535 13.02l1.415 1.413 1.414-1.415-1.415-1.413-1.414 1.414ZM9 14H7v2h2v-2ZM1.566 12.948l1.414 1.415 1.415-1.413-1.414-1.415-1.415 1.413ZM2 7H0v2h2V7ZM4.465 3.12 3.05 1.707 1.636 3.12l1.415 1.414L4.465 3.12Z"></path>
                                    <path class="c7cme cksqw" d="M8 4C5.8 4 4 5.8 4 8s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4Z"></path>
                                </svg>
                                <span class="cz99u">Switch to light / dark version</span>
                            </label>
                        </div>
            
                    </div>
                </div>
            </div>
        </header>

        <!-- Page content -->
        <main class="cgnjb">
            
            <section><button id="confetti" class="button"></button>
                <div class="c5fcz cnmmr cg498 cw2nq">
                    <div class="cy6zq crh5c">

                        <div class="cpthp czrhe">
                            <div class="c9pd1">

                                <div class="c0drb cpgkc ckhko c26j7 c2wd7 cl110 cd8xp ctanz cqckm conig cc8zc c0zgo c3927 chwso clw5z ckuy9 cjewx cx8zz ckwv3 cb7i0 cj1vz cezsk">
                                    <div class="cxo8x cw1gd cmkro cbc1e cyfzq cevtx cshco cv8gl cgrfs cxcm6 cxpc2 ccjiw c1l9r ckwv3 cryv2 cc7et cf0cr c02c5">
                                        <!-- Border with dots in corners -->
                                        <div class="c3cy3 cpoza c4xyw cauvd cehp5 chqy8 c3ehf cks6d c8z9n crgvw c2z22 cr2ij cpue7 c8arv cevtx cr5hf cw7re cxgoq cjkk2 c1qs0 ckoug cpnw7 cr8aa cag0k" aria-hidden="true"></div>                                    
                                        <span class="c0cnt ce627 cyiq9 ccjbb cfatl c2gcs ckwv3">#100daysofMivaðŸŽ‰ </span>
                                    </div>
                                </div>

                                <h2 class="c0cnt ce627 cwr74 cfatl crlpf cbwmu c2gcs cr5d0 cvxf3 ch47f casec">Web Snapshot</h2>
                                <p class="cauea cgrfs cs94t">
                                    Get a minimal webshot of a url. It's still a prototype so some pages may not be renderd correctly
                                </p>

                            </div>
                        </div>

                    </div>
                </div>
            </section>

            <!-- Main content -->
            
            <!-- Newsletter -->
            <section>
                <div class="c5fcz cg498">
                    <div class="cy6zq crh5c">

                    
    
                        <div class="c1t8r c330t cfs2v c1upr c2wd7 cl110 cd8xp ctanz cqckm conig cc8zc c0zgo c3927 ciay6 c7a79 chwso clw5z cjewx ckwv3 cgio7 c9l48 cezsk">
                            <div id="app"  class="cgc2y c81ef czrhe coe0p"><div id="message"></div>
                                <form id="linkForm" onsubmit="submitForm(event)" class="ckwv3">
                                    
                                    <!-- Border with dots in corners -->
                                    <div class="cq4r1 cfdqj ck5ws c5pov cehp5 chqy8 cym3j cxpxq cvvig c0cnt cba0k crgvw ci2tu c2z22 csmr0 cr2ij cpue7 c26dl cevtx cr5hf cxgoq cjkk2 c1qs0 ccjiw cr8aa clot7 cag0k" aria-hidden="true"></div>

                                    <div class="cacgm">
                                        <div>
                                            <label class="cz99u" for="url">Enter Url</label>
                                            <div class="ckwv3">
                                                <div class="cis7l cwysf cud52 chwso c9v7h cr8aa cu4yo cezsk cyi7p">
                                                    <svg class="cdyx3" fill="none" height="16" width="16" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512" xml:space="preserve"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <g> <path d="M256,0C114.62,0,0,114.62,0,256s114.62,256,256,256s256-114.62,256-256S397.38,0,256,0z M172.211,41.609 c-24.934,27.119-44.68,66.125-56.755,111.992H49.749C75.179,102.741,118.869,62.524,172.211,41.609z M25.6,256 c0-26.999,5.077-52.727,13.662-76.8h70.494c-4.608,24.294-7.356,49.963-7.356,76.8s2.748,52.506,7.347,76.8H39.262 C30.677,308.727,25.6,283,25.6,256z M49.749,358.4h65.707c12.083,45.867,31.821,84.872,56.755,111.991 C118.869,449.476,75.179,409.259,49.749,358.4z M243.2,485.188c-43.81-8.252-81.877-58.24-101.359-126.788H243.2V485.188z M243.2,332.8H135.74c-4.924-24.166-7.74-49.997-7.74-76.8s2.816-52.634,7.74-76.8H243.2V332.8z M243.2,153.6H141.841 C161.323,85.052,199.39,35.063,243.2,26.812V153.6z M462.251,153.6h-65.707c-12.083-45.867-31.821-84.873-56.755-111.992 C393.131,62.524,436.821,102.741,462.251,153.6z M268.8,26.812c43.81,8.252,81.877,58.24,101.359,126.788H268.8V26.812z M268.8,179.2h107.46c4.924,24.166,7.74,49.997,7.74,76.8s-2.816,52.634-7.74,76.8H268.8V179.2z M268.8,485.188V358.4h101.359 C350.677,426.948,312.61,476.937,268.8,485.188z M339.789,470.391c24.934-27.127,44.672-66.125,56.755-111.991h65.707 C436.821,409.259,393.131,449.476,339.789,470.391z M402.244,332.8c4.608-24.294,7.356-49.963,7.356-76.8 s-2.748-52.506-7.347-76.8h70.494c8.576,24.073,13.653,49.801,13.653,76.8c0,27-5.077,52.727-13.662,76.8H402.244z"></path> </g> </g> </g></svg>
                                                </div>
                                                <input id="rand_word" name="rand_word" class="coyoz cc7et coe0p cyujy cjygq" type="url" placeholder="e.g https://example.com" required="">
                                            </div>
                                            
                                        </div>
                                        <div>  
                                            </div>
                                        
                                        <div>
                                            <button id="submitButton" class="cg4ff czbbd cfhsj czmlk ceto1 ccs7d coe0p chuxb">
                                            Get Image</button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                            <div id="app2" style="display: none" class="cgc2y c81ef czrhe coe0p">
                                <div class="ckwv3">
                                    <p id="api_title" class="c5x50 cbwmu cd79k c2gcs cj90m">
                                    
                                </p>
                                    <!-- Border with dots in corners -->
                                    <div class="cq4r1 cfdqj ck5ws c5pov cehp5 chqy8 cym3j cxpxq cvvig c0cnt cba0k crgvw ci2tu c2z22 csmr0 cr2ij cpue7 c26dl cevtx cr5hf cxgoq cjkk2 c1qs0 ccjiw cr8aa clot7 cag0k" aria-hidden="true"></div>

                                    <div class="cacgm">
                                        <div>
                                            
                                            <div class="ckwv3">
                                                
                                                <img src="" id="api_img"  class="cot75 coe0p c4gmd cc7et">
                                            </div>
                                        </div>
                                        <div>
                                            <button id="save" class="cg4ff czbbd cfhsj czmlk ceto1 ccs7d coe0p chuxb">Save Image</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="cpthp czrhe">
                            <div class="c9pd1">
                                <!-- Avatars -->
                                <p class="ckasv cc7et">Join me <span class="cj90m cgrfs cxpc2"></span> to build up a community for miva devs</p>
                            </div>
                        </div>

                    </div>
                </div>
            </section>            

        </main>

        <!-- Site footer -->
        <footer class="c9v3y crbyi c7hiy cvq6c c07f0">
            <div class="cy6zq crh5c">
                <div class="cpthp czrhe">
                    <div class="c9pd1 c82jv">
                        <p class="cauea cgrfs cc7et"><a class="cb5h9 cfx8h cxpc2" onclick="showSupportInfo()">Buy Me an ice-cream</a><br/>Â© Simple Webshot  - A more meaningful API #100daysofMiva . Built by <a class="cb5h9 cfx8h cxpc2" href="https://marvelly.com.ng" target="_blank">Marvelly</a>. </p>
                    </div>
                </div>
            </div>
        </footer>

    </div>
<!-- JavaScript Code -->
        <script src="https://confettijs.org/confetti.min.js"></script>
    <script> 
   
async function submitForm(event) {
    event.preventDefault(); // Prevent the form from submitting the default way

    const formData = new FormData(document.getElementById('linkForm'));
    const submitButton = document.getElementById('submitButton');
    const message = document.getElementById('message');
    const randWord = formData.get('rand_word'); // Get the value of the rand_word field
     let confetti = new Confetti("confetti");
        // Edit given parameters
        confetti.setCount(500);
        confetti.setSize(1);
        confetti.setPower(25);
        confetti.setFade(false);
        confetti.destroyTarget(true);

    // Display initial button text immediately
    submitButton.innerText = "Submitting...";
    submitButton.classList.add('submitting');
    submitButton.disabled = true;
    message.style.display = 'none'; // Hide the message box initially

    // Prepare for dynamic button text updates
    const baseMessages = [
        "Taking Screenshot...",
        "Almost done...",
        "Hold on...",
        "Still working on it..."
    ];
    let messageIndex = 0;

    const updateButtonText = () => {
        submitButton.innerText = `${baseMessages[messageIndex]}`;
        messageIndex = (messageIndex + 1) % baseMessages.length;
    };

    // Update the button text every 2200ms
    const messageInterval = setInterval(updateButtonText, 2200);

    try {
        // Fetch from API
        const response = await fetch(`https://cherie.marvelly.com.ng/screenshot?thirdparty=1&url=${encodeURIComponent(randWord)}`);
        
        // Check if the response is OK
        if (!response.ok) {
            throw new Error('Network response was not ok');
        }

        const data = await response.json();

        // Debug: Log the response data
        console.log('API response:', data);

        // Hide #app and show #app2
        document.getElementById("confetti").click();
        document.getElementById('app').style.display = 'none';
        const app2 = document.getElementById('app2');
        app2.style.display = 'block';

        // Update #app2 with API response
        document.getElementById('api_title').innerText = data.title;
        document.getElementById('api_img').src = data.screenshotURL;

        // Clear the interval and reset the button state
        clearInterval(messageInterval);
        submitButton.innerText = 'Submit';
        submitButton.classList.remove('submitting');
        submitButton.disabled = false;

        // Reset the form fields
        document.getElementById('linkForm').reset();

    } catch (error) {
        console.error('Error fetching data:', error);
        message.innerText = 'An error occurred while fetching the screenshot.';
        message.style.display = 'block';

        // Clear the interval and reset the button state
        clearInterval(messageInterval);
        submitButton.innerText = 'Submit';
        submitButton.classList.remove('submitting');
        submitButton.disabled = false;
    }
}

// Handle the save image button click
document.getElementById('save').addEventListener('click', async function() {
  const img = document.getElementById('api_img');
  const imageSrc = img.src;
  const fileName = 'webshot-marvelly.png'; // You can customize this

  try {
    const response = await fetch(imageSrc);
    const blob = await response.blob();
    const url = URL.createObjectURL(blob);

    const link = document.createElement('a');
    link.href = url;
    link.download = fileName;
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);

    URL.revokeObjectURL(url); // Release the object URL
  } catch (error) {
    console.error('Error downloading image:', error);
  }
});

    // Light switcher
const lightSwitches = document.querySelectorAll('.light-switch');
if (lightSwitches.length > 0) {
  lightSwitches.forEach((lightSwitch, i) => {
    if (localStorage.getItem('dark-mode') === 'true') {
      // eslint-disable-next-line no-param-reassign
      lightSwitch.checked = true;
    }
    lightSwitch.addEventListener('change', () => {
      const { checked } = lightSwitch;
      lightSwitches.forEach((el, n) => {
        if (n !== i) {
          // eslint-disable-next-line no-param-reassign
          el.checked = checked;
        }
      });
      document.documentElement.classList.add('[&_*]:!transition-none');
      if (lightSwitch.checked) {
        document.documentElement.classList.add('dark');
        document.querySelector('html').style.colorScheme = 'dark';
        localStorage.setItem('dark-mode', true);
        document.dispatchEvent(new CustomEvent('darkMode', { detail: { mode: 'on' } }));
      } else {
        document.documentElement.classList.remove('dark');
        document.querySelector('html').style.colorScheme = 'light';
        localStorage.setItem('dark-mode', false);
        document.dispatchEvent(new CustomEvent('darkMode', { detail: { mode: 'off' } }));
      }
      setTimeout(() => {
        document.documentElement.classList.remove('[&_*]:!transition-none');
      }, 1);
    });
  });
  }
    </script>
<script src="https://app.marvelly.com.ng/cgpa/design/alpinejs.min.js" defer=""></script>
   <script>
    function showApiInfo() {
        Swal.fire({
            title: "Already looking for a rest Api?",
            text: "Calm down. i'm a solo dev... i have a life you knowðŸ˜‚ðŸŒš",
            icon: "info",
            showCancelButton: true,
            confirmButtonColor: "#3085d6",
            cancelButtonColor: "#d33",
            confirmButtonText: "Okay",
            cancelButtonText: "Close"
        });
    }
    function showSupportInfo() {
        Swal.fire({
            title: "An ice-cream would be nice right?ðŸ¥²ðŸ¤²ðŸ»",
            text: "KUDA MFB - 2063070682",
            icon: "info",
            showCancelButton: true,
            confirmButtonColor: "#3085d6",
            cancelButtonColor: "#d33",
            confirmButtonText: "Copy",
            cancelButtonText: "Cancel"
        }).then((result) => {
            if (result.isConfirmed) {
                copyToClipboard();
                Swal.fire({
                    icon: "success",
                    title: "Copied!",
                    text: "The account number has been copied to your clipboard.",
                });
            }
        });
    }
    
    function copyToClipboard() {
        const number = "2063070682";
        navigator.clipboard.writeText(number);
    }
</script>

</body></html>
